"use strict";(self.webpackChunksuse_edge_docs=self.webpackChunksuse_edge_docs||[]).push([[3662],{4036:(e,i,o)=>{o.r(i),o.d(i,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var s=o(5893),n=o(1151);const r={sidebar_position:3,title:"Modify SLE Micro ISO (or any SLE ISO)"},t="Requisites",a={id:"misc/modify-sle-micro-iso",title:"Modify SLE Micro ISO (or any SLE ISO)",description:"This is totally unsupported. Via elemental-iso-add-registration.",source:"@site/docs/misc/modify-sle-micro-iso.md",sourceDirName:"misc",slug:"/misc/modify-sle-micro-iso",permalink:"/docs/misc/modify-sle-micro-iso",draft:!1,unlisted:!1,editUrl:"https://github.com/suse-edge/suse-edge.github.io/tree/main/docs/misc/modify-sle-micro-iso.md",tags:[],version:"current",lastUpdatedBy:"Eduardo M\xednguez",lastUpdatedAt:1686641845,formattedLastUpdatedAt:"Jun 13, 2023",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Modify SLE Micro ISO (or any SLE ISO)"},sidebar:"docs",previous:{title:"Rancher portfolio disambiguation",permalink:"/docs/misc/rancher-disambiguation"},next:{title:"Running sushy-emulator as a container on SLES/openSUSE",permalink:"/docs/misc/sushy-emulator-sles-certificates-container"}},d={},l=[];function c(e){const i={a:"a",blockquote:"blockquote",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:["\u26a0\ufe0f"," This is totally unsupported. Via ",(0,s.jsx)(i.a,{href:"https://github.com/rancher/elemental/blob/c00c34268572572f4bc2131c0121f6d8b5712942/.github/elemental-iso-add-registration#L62",children:"elemental-iso-add-registration"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.h1,{id:"requisites",children:"Requisites"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"SLE Micro ISO (or any SLE ISO)"}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.a,{href:"https://www.gnu.org/software/xorriso/",children:"xorriso"}),". It can be installed with ",(0,s.jsx)(i.a,{href:"https://software.opensuse.org/package/xorriso",children:(0,s.jsx)(i.code,{children:"zypper"})})," or via the ",(0,s.jsx)(i.code,{children:"registry.opensuse.org/isv/rancher/elemental/stable/teal53/15.4/rancher/elemental-builder-image/5.3:latest"})," container image."]}),"\n"]}),"\n",(0,s.jsx)(i.h1,{id:"usage",children:"Usage"}),"\n",(0,s.jsxs)(i.p,{children:["Imagine you want to modify the ",(0,s.jsx)(i.code,{children:"/boot/grub2/grub.cfg"})," file. You just need to:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"mount the ISO somewhere"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"ISO=${${HOME}/SLE-Micro.x86_64-5.4.0-Default-SelfInstall-GM.install.iso}\nDIR=$(mktemp -d)\nsudo mount ${ISO} ${DIR}\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"extract the file"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"cp ${DIR}/boot/grub2/grub.cfg /tmp/mygrub.cfg\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"perform the modifications as needed"}),"\n",(0,s.jsx)(i.li,{children:"Umount the ISO (not really needed)"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"sudo umount ${DIR}\nrmdir ${DIR} \n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"rebuild the ISO as"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"xorriso -indev ${ISO} -outdev SLE-Micro-tweaked.iso -map /tmp/mygrub.cfg /boot/grub2/grub.cfg -boot_image any replay\n\nxorriso 1.4.6 : RockRidge filesystem manipulator, libburnia project.\n\nxorriso : NOTE : ISO image bears MBR with  -boot_image any partition_offset=16\nxorriso : NOTE : Loading ISO image tree from LBA 0\nxorriso : UPDATE : 371 nodes read in 1 seconds\nlibisofs: WARNING : Found hidden El-Torito image. Its size could not be figured out, so image modify or boot image patching may lead to bad results.\nxorriso : NOTE : Detected El-Torito boot information which currently is set to be discarded\nDrive current: -indev './SLE-Micro.x86_64-5.4.0-Default-RT-SelfInstall-GM.install.iso'\nMedia current: stdio file, overwriteable\nMedia status : is written , is appendable\nBoot record  : El Torito , MBR grub2-mbr cyl-align-off\nMedia summary: 1 session, 494584 data blocks,  966m data,  114g free\nVolume id    : 'INSTALL'\nDrive current: -outdev 'SLE-Micro-tweaked.iso'\nMedia current: stdio file, overwriteable\nMedia status : is blank\nMedia summary: 0 sessions, 0 data blocks, 0 data,  114g free\nxorriso : UPDATE : 1 files added in 1 seconds\nAdded to ISO image: file '/boot/grub2/grub.cfg'='/tmp/mygrub.cfg'\nxorriso : NOTE : Replayed 21 boot related commands\nxorriso : NOTE : Copying to System Area: 32768 bytes from file '--interval:imported_iso:0s-15s:zero_mbrpt:./SLE-Micro.x86_64-5.4.0-Default-RT-SelfInstall-GM.install.iso'\nxorriso : NOTE : Preserving in ISO image: -boot_image any partition_offset=16\nxorriso : UPDATE : Writing:      32768s    6.5%   fifo 100%  buf  50%\nxorriso : UPDATE : Writing:      67205s   13.3%   fifo  96%  buf  50%\nxorriso : UPDATE : Writing:     442368s   87.6%   fifo 100%  buf  50%  553.8xD\nISO image produced: 504777 sectors\nWritten to medium : 504784 sectors at LBA 48\nWriting to 'SLE-Micro-tweaked.iso' completed successfully.\n"})})]})}function u(e={}){const{wrapper:i}={...(0,n.a)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},1151:(e,i,o)=>{o.d(i,{Z:()=>a,a:()=>t});var s=o(7294);const n={},r=s.createContext(n);function t(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);